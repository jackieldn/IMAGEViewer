<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Viewer v0.52</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="bg-shape bg-teal"></div>
    <div class="bg-shape bg-primary"></div>
    <header>
        <div class="logo"><img src="T&P_2024_Primary_Logo_Black.png" alt="T&P Logo"></div>
        <div class="title">IMAGE Viewer v0.52</div>
        <a href="about.html" class="about-btn">About</a>
    </header>
    <section class="reminder">
        <p><strong>Reminder</strong></p>
        <p><strong>This is a simple HTML application that does not require an active internet connection. Files are being displayed locally and not sent to servers.</strong></p>
    </section>
    <section class="content">
        <div class="file-browser">
            <p><b>Select an image to display</b><br>(.gif, .png, .jpg, .jpeg)<br/></p>
            <input type="file" id="file1" accept=".gif, .jpeg, .jpg, .png" onchange="displayImage()">
            <label for="file1" id="fileLabel" class="file-btn">File browser</label>
            <p id="fileName"></p>
        </div>
        <div class="image-display" id="gifs">
            <!-- Image will be displayed here -->
        </div>
    </section>
    <script>
        function displayFileName() {
            const fileInput = document.getElementById('file1');
            const fileNameP = document.getElementById('fileName');
            const file = fileInput.files[0];
            if (file) {
                fileNameP.textContent = file.name;
            } else {
                fileNameP.textContent = '';
            }
        }

        function displayImage() {
            const fileInput = document.getElementById('file1');
            const gifsDiv = document.getElementById('gifs');
            const file = fileInput.files[0];
            const fileLabel = document.getElementById('fileLabel');

            if (file && (file.type === 'image/gif' || file.type === 'image/jpeg' || file.type === 'image/jpg' || file.type === 'image/png')) {
                const tempImg = document.createElement('img');
                tempImg.src = URL.createObjectURL(file);
                tempImg.style.display = 'none';
                document.body.appendChild(tempImg);
                tempImg.addEventListener('load', function() {
                    const width = this.width;
                    const height = this.height;
                    const scale = window.devicePixelRatio || 1;
                    document.body.removeChild(tempImg);
                    gifsDiv.innerHTML = `
                        <div class="gif-wrapper">
                            <p>${file.name}</p>
                            <p class="gif-resolution">${width} x ${height}</p>
                            <div class="gif-container" style="width: ${width / scale}px; height: ${height / scale}px;">
                                <img id="myImage" src="${URL.createObjectURL(file)}" width="${width / scale}" height="${height / scale}">
                            </div>
                        </div>
                    `;
                    fileLabel.textContent = 'Select new';
                    fileLabel.onclick = clearImage;
                });
                displayFileName();
            }
        }

        function clearImage() {
            const fileInput = document.getElementById('file1');
            const gifsDiv = document.getElementById('gifs');
            const fileLabel = document.getElementById('fileLabel');
            const fileNameP = document.getElementById('fileName');

            gifsDiv.innerHTML = '';
            fileNameP.textContent = '';
            fileLabel.textContent = 'File browser';
            fileLabel.onclick = null;
        }
    </script>
</body>
</html>
